<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>遍历的应用</title>
  </head>
  <body>
    <script type="text/javascript">
      // (1)扩展运算符（...）内部使用for...of循环，所以也可以用于 Set 结构。
      // let set =new Set(['red','green','blue']);
      // let arr = [...set];
      // console.log(arr);
      //(2)扩展运算符和 Set 结构相结合，就可以去除数组的重复成员。
      // let arr = [3,5,8,42,1,20,3,8,42];
      // let unique = [...new Set(arr)];
      // console.log(unique);
      //(3)而且，数组的map和filter方法也可以间接用于 Set 了。
      // let set=new Set([1,2,3]);
      // set = new Set([...set].map(x=> x*2));
      // console.log(set);//返回Set结构：{2,4}

      // let set =new Set([1,23,3,4,55,66]);
      // set =new Set([...set].filter(x=>(x%2)==0));
      // console.log(set);
      // 因此使用 Set 可以很容易地实现并集（Union）、交集（Intersect）和差集（Difference）。
      let a = new Set([1,2,3]);
      let b = new Set([4,3,2]);

      //并集
      let union = [...a, ...b];
      console.log(union);

      //交集
      let intersect = new Set([...a].filter(x=> b.has(x)));
      console.log(intersect);

      //差集
      let difference = new Set([...a].filter(x=> !b.has(x)));
      console.log(difference);

      /*
      如果想在遍历操作中，同步改变原来的 Set 结构，目前没有直接的方法，但有两种变通方法。
      一种是利用原 Set 结构映射出一个新的结构，然后赋值给原来的 Set 结构；另一种是利用Array.from方法。
      */
      let set_two = new Set([1,2,3]);
      set_two =new Set([...set_two].map(val=>val*2));
      console.log(set_two);

      let set_third = new Set([4,5,6]);
      set_third = new Set(Array.from(set_third,val=>val*2));
      console.log(set_thirdA);
    </script>
  </body>
</html>
